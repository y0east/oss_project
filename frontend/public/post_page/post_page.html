<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>공지사항 상세</title>
    <!-- Google Fonts & Tailwind CSS -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-50 font-[Nanum Gothic]">
    <section class="max-w-3xl mx-auto px-4 py-16">
      <h1 id="post-title" class="text-3xl font-bold mb-4">로딩 중…</h1>
      <p id="post-date" class="text-sm text-gray-600 mb-6"></p>
      <div id="post-content" class="prose mb-8 text-gray-800"></div>
      <p id="post-views" class="text-sm text-gray-600"></p>
    </section>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const params = new URLSearchParams(location.search);
        const id = params.get('id');
        if (!id) {
          document.getElementById('post-title').textContent =
            '잘못된 요청입니다.';
          return;
        }

        fetch(`http://localhost:8080/api/posts/${id}`)
          .then((res) => {
            if (!res.ok) throw new Error('게시글을 불러올 수 없습니다');
            return res.json();
          })
          .then((post) => {
            const d = new Date(post.createdAt);
            const date = [
              d.getFullYear(),
              String(d.getMonth() + 1).padStart(2, '0'),
              String(d.getDate()).padStart(2, '0'),
            ].join('.');

            document.getElementById('post-title').textContent = post.title;
            document.getElementById(
              'post-date'
            ).textContent = `작성일: ${date}`;
            document.getElementById('post-content').textContent = post.content;
            document.getElementById(
              'post-views'
            ).textContent = `조회수: ${post.viewCount}`;
          })
          .catch((err) => {
            console.error(err);
            document.getElementById('post-title').textContent =
              '오류가 발생했습니다.';
            document.getElementById('post-date').textContent = '';
            document.getElementById('post-content').textContent = '';
          });
      });
    </script>
  </body>
</html>
